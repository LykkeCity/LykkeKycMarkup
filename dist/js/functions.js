function initResize(){$(window).resize(function(){setTimeout(function(){$(".header_container").css({height:$(".header").outerHeight()})},30),$(".video iframe").css({maxHeight:$(window).outerHeight()-$("header").outerHeight()}),$("body").css({paddingBottom:$("footer").outerHeight()})}).trigger("resize")}function initEventsOnClick(){isMobile||$("body").on("click",'a[href^="tel:"]',function(){$(this).attr("href",$(this).attr("href").replace(/^tel:/,"callto:"))})}function initEventsOnScroll(){$(window).scroll(function(){var e=$(window).height()+$(window).scrollTop(),t=$(document).height()-$(".footer").outerHeight(),a=20;e>t+a?$("body").addClass("footer_in_view").find("#launcher, .btn_feedback").css({bottom:$(".footer").outerHeight()}):$("body").removeClass("footer_in_view").find("#launcher, .btn_feedback").css({bottom:0})}).trigger("scroll")}function initHeader(){isMobile||768>=wW?$(".header_nav .nav_list__item > a").on("click",function(e){e.stopPropagation();$(this).attr("href");return $(this).parent(".nav_list__item").hasClass("nav_list__item--selected")?!0:($(".header_nav").addClass("header_nav--selected"),$(".header_nav .nav_list__item").removeClass("nav_list__item--selected"),$(this).parent(".nav_list__item").addClass("nav_list__item--selected"),e.preventDefault(),void 0)}):hideSubMenu(),$(".btn_menu").on("click",function(e){e.preventDefault(),e.stopPropagation(),$("body").addClass("body--menu_opened"),$(".sidebar_menu").addClass("sidebar_menu--open")}),$(".sidebar_menu, .header_search").on("click",function(e){e.stopPropagation()}),$("body, .btn_close_menu, .menu_overlay, .btn_close_header").on("click",function(){$("body").removeClass("body--menu_opened body--search_showed"),$(".sidebar_menu").removeClass("sidebar_menu--open"),$(".header_search").removeClass("header_search--show"),hideSubMenu()}),$(".btn_open_search").on("click",function(e){e.preventDefault(),e.stopPropagation(),$("body").addClass("body--search_showed"),$(".header_search").addClass("header_search--show")})}function hideSubMenu(){$(".header_nav").removeClass("header_nav--selected"),$(".nav_list__item").removeClass("nav_list__item--selected")}function initSmoothScroll(){$(".smooth_scroll").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash),t=$(this).data("scroll-offset")?$(this).data("scroll-offset"):0;if(e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)return $("html, body").animate({scrollTop:e.offset().top-t},1e3),!1}})}function initAffix(){$(".btn_affix").affix({offset:{top:function(){return this.top=$(".site_nav").offset().top-$(".header_container").outerHeight()}}}),$(window).resize(function(){$(".btn_affix").css({right:$(".header .container").offset().left+15})}).trigger("resize")}function initStickyNav(){function e(){var e=$(this).scrollTop();Math.abs(a-e)<=i||(e>a&&e>o?(hideSubMenu(),$(".header_nav, .header, .btn_affix").removeClass("nav_down").addClass("nav_up")):(hideSubMenu(),e+$(window).height()<$(document).height()&&$(".header_nav, .header, .btn_affix").removeClass("nav_up").addClass("nav_down")),a=e)}var t,a=0,i=5,o=$(".header_nav").outerHeight();$(window).scroll(function(e){t=!0}),setInterval(function(){t&&(e(),t=!1)},250),$(window).resize(function(){setTimeout(function(){$(".header_nav").css({paddingTop:$(".header").outerHeight()})},30)}).trigger("resize")}function initFileUpload(){$("._upload_file").on(touchendOrClick,function(e){function t(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){$(a).parents(".fileupload").removeClass("fileupload--fail").addClass("fileupload--uploaded").attr("style","background-image: url("+e.target.result+")").find(".fileupload__field").val(e.target.result)},t.readAsDataURL(e.files[0])}}e.preventDefault();var a=$(this).data("file-id");$(a).click().on("change",function(){t(this)})})}function takePhoto(){var e=takeSnapshot();image.setAttribute("src",e),image.classList.add("visible"),frame.classList.remove("visible"),controls.classList.add("visible"),take_photo_btn.classList.remove("visible"),video.classList.remove("visible"),savePhotoSrc=e,video.pause()}function showVideo(){deletePhoto()}function takeSnapshot(){var e=document.querySelector("canvas"),t=e.getContext("2d"),a=video.videoWidth,i=video.videoHeight;return a&&i?(e.width=a,e.height=i,t.drawImage(video,0,0,a,i),e.toDataURL("image/png")):void 0}function deletePhoto(){hideUI(),frame.classList.add("visible"),video.classList.add("visible"),take_photo_btn.classList.add("visible"),video.play()}function displayErrorMessage(e,t){t=t||"",t&&console.error(t),error_message.innerText=e,hideUI(),error_message.classList.add("visible")}function hideUI(){controls.classList.remove("visible"),take_photo_btn.classList.remove("visible"),video.classList.remove("visible"),error_message.classList.remove("visible"),frame.classList.remove("visible"),image.setAttribute("src",""),image.classList.remove("visible")}function initCamera(){navigator.getMedia?navigator.getMedia({video:!0},function(e){localStream=e,video.src=window.URL.createObjectURL(e),video.play(),video.onplay=function(){showVideo()}},function(e){displayErrorMessage("There was an error with accessing the camera stream: "+e.name,e)}):displayErrorMessage("Your browser doesn't have support for the navigator.getUserMedia interface.")}function usePhoto(){$(saveRelatedTarget).closest($(".fileupload")).removeClass("fileupload--fail").addClass("fileupload--uploaded").attr("style","background-image: url("+savePhotoSrc+")"),$(saveRelatedTarget).closest($(".fileupload")).find(".fileupload__field").val(savePhotoSrc),hideUI(),$(saveRelatedTarget).closest(".fileupload").children(".fileupload__field").val(savePhotoSrc),$(saveRelatedTarget).closest(".fileupload").children(".use-file").val("false"),$(saveRelatedTarget).closest(".fileupload").children(".use-camera").val("true"),$(saveRelatedTarget).closest(".fileupload").children(".file-extension").val("png"),localStream.getVideoTracks()[0].stop(),saveRelatedTarget=null,$("#camera").modal("hide")}var wH=$(window).height(),wW=$(window).width(),ua=navigator.userAgent,touchendOrClick=ua.match(/iPad|iPhone|iPad/i)?"touchend":"click",deviceAgent=navigator.userAgent.toLowerCase(),isMobile=deviceAgent.match(/(iphone|ipod|ipad)/);if(isMobile||767>=wW?$("body").addClass("is_mobile"):$("body").removeClass("is_mobile"),$(document).ready(function(){initResize(),initEventsOnClick(),initEventsOnScroll(),initHeader(),initStickyNav(),initSmoothScroll(),initAffix(),initFileUpload()}),$(".camera_stream").length){var video=document.querySelector("._camera_video"),image=document.querySelector("._camera_snap"),controls=document.querySelector("._camera_controls"),frame=document.querySelector("._camera_frame"),take_photo_btn=document.querySelector("._take_photo"),delete_photo_btn=document.querySelector("._delete_photo"),use_photo_btn=document.querySelector("._use_photo"),error_message=document.querySelector("._camera_message"),camera_title=document.querySelector("._camera_title"),localStream,savePhotoSrc,saveRelatedTarget,action,group,title;video.setAttribute("autoplay",""),video.setAttribute("muted",""),video.setAttribute("playsinline",!0),video.setAttribute("controls",!0),setTimeout(function(){video.removeAttribute("controls")}),navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,take_photo_btn.addEventListener("click",function(e){e.preventDefault(),takePhoto()}),delete_photo_btn.addEventListener("click",function(e){e.preventDefault(),deletePhoto()}),$("#camera").on("show.bs.modal",function(e){initCamera(),saveRelatedTarget=e.relatedTarget,action=$(saveRelatedTarget).data("action"),group=$(saveRelatedTarget).data("group"),title=$(e.relatedTarget).closest($(".fileupload")).find(".fileupload__title").text(),camera_title.textContent=title}),$("#camera").on("hide.bs.modal",function(){hideUI(),localStream.getVideoTracks()[0].stop(),saveRelatedTarget=null,camera_title.textContent=""}),use_photo_btn.addEventListener("click",function(e){e.preventDefault(),usePhoto(),"front"===action&&setTimeout(function(){$('[data-action="back"][data-group='+group+"]").click()},700)})}